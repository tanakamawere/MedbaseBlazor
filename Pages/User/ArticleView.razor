@page "/article/{id:int}"
@using MedbaseBlazor.Models
@inject IApiRepository repository
@using Markdig

<PageTitle>Article</PageTitle>
<div class="container">   
  <!-- Page Content -->
  <div class="container">

    <!-- Page Heading/Breadcrumbs -->
    <h1 class="mt-4 mb-3">@Article.Title
      <small>by
        <a href="#">@Article.Writer</a>
      </small>
    </h1>

    <div class="row">

      <!-- Post Content Column -->
      <div class="col-lg-8">

        <!-- Preview Image -->
        <img class="img-fluid rounded" src="@Article.ImageURL" alt="">

        <hr>

        <!-- Date/Time -->
        <p>@Article.DatePosted.ToString("dddd, dd MMMM yyyy")</p>

        <hr>

        <!-- Post Content -->
            <p class="font-italic">@Article.Summary)</p>

                <p>@((MarkupString)Markdown.ToHtml(Article.Body))</p>
      </div>

      <!-- Sidebar Widgets Column -->
      <div class="col-md-4">

        <!-- Side Widget -->
        <div class="card my-4">
          <h5 class="card-header">More to read?</h5>
          <div class="card-body">
            Go back to <a class="ml-5" asp-action="Articles">Articles</a>.
          </div>
        </div>

      </div>

    </div>
    <!-- /.row -->

  </div>
  <!-- /.container -->
</div>
@code {

    public Article Article { get; set; } = new();

    [Parameter]
    public int id { get; set; } = 0;

    protected async override Task OnParametersSetAsync()
    {
        if (id != 0)
        {
            Article = await repository.GetArticle(id) ?? new();
        }
    }
}
